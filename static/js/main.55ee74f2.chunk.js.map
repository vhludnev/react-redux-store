{"version":3,"sources":["store.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","components/actions/index.js","components/utils/compose.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","components/pages/home-page.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/pages/cart-page.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","components/reducers/book-list.js","components/reducers/shopping-cart.js","components/reducers/index.js","index.js"],"names":["timeout","ShopHeader","connect","shoppingCart","numItems","totalCount","total","orderTotal","className","to","BookListItem","book","onAddedToCart","title","author","price","coverImage","page","src","alt","href","target","rel","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","bookAddedToCart","bookId","type","payload","fetchBooks","dispatch","getBooks","then","data","catch","err","compose","funcs","comp","reduceRight","wrapped","f","Spinner","ErrorIndicator","BookList","books","map","id","BookListContainer","this","loading","error","Component","bookList","bindActionCreators","HomePage","mapDispatchToProps","onIncrease","onDecrease","onDelete","ShoppingCartTable","items","cartItems","item","idx","count","toFixed","CartPage","App","role","exact","path","component","ErrorBoundry","state","hasError","setState","children","BookstoreService","Promise","resolve","setTimeout","updateBookList","action","undefined","updateCartItems","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","reduce","a","b","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","getState","console","log","ReactDOM","render","StrictMode","value","document","getElementById"],"mappings":"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","file":"static/js/main.55ee74f2.chunk.js","sourcesContent":["import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\n\r\nimport reducer from './components/reducers';\r\n\r\nconst logMiddleware = ({ getState }) => (next) => (action) => {\r\n    console.log(action.type, getState());\r\n    return next(action);\r\n};\r\n\r\nconst stringMiddleware = () => (next) => (action) => {\r\n    if (typeof action === 'string') {\r\n        return next({\r\n            type: action\r\n        });\r\n    }\r\n\r\n  return next(action);\r\n};\r\n\r\nconst store = createStore(reducer, applyMiddleware(\r\n  thunkMiddleware, stringMiddleware, logMiddleware));\r\n\r\nconst delayedActionCreator = (timeout) => (dispatch) => {  \r\n    setTimeout(() => dispatch({\r\n        type: 'DELAYED_ACTION'\r\n    }), timeout);\r\n};\r\n\r\nstore.dispatch(delayedActionCreator(3000));\r\n\r\nexport default store;","import ShopHeader from './shop-header';\r\n\r\nexport default ShopHeader;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport './shop-header.scss';\r\n\r\nconst ShopHeader = ({ numItems, total }) => {\r\n  return (\r\n    <header className=\"shop-header row\">\r\n      <Link to=\"/react-redux-store\">\r\n        <div className=\"logo text-dark\">React Redux Store</div>\r\n      </Link>\r\n      <Link to=\"/cart\">\r\n        <div className=\"shopping-cart\">\r\n          <i className=\"cart-icon fa fa-shopping-cart\" />\r\n          {numItems} items (${total})\r\n        </div>\r\n      </Link>\r\n    </header>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { totalCount, orderTotal }}) => {\r\n  return {\r\n    numItems: totalCount,\r\n    total: orderTotal\r\n  };\r\n};\r\nexport default connect(mapStateToProps)(ShopHeader);","import BookListItem from './book-list-item';\r\n\r\nexport default BookListItem;","import React from 'react';\r\n\r\nimport './book-list-item.scss';\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n  const { title, author, price, coverImage, page } = book;\r\n\r\n  return (\r\n    <div className=\"book-list-item\">\r\n      <div className=\"book-cover\">\r\n        <img src={coverImage} alt=\"cover\" />\r\n      </div>\r\n      <div className=\"book-details\">\r\n        <a href={page} target=\"_blank\" rel=\"noreferrer\" className=\"book-title\">{title}</a>\r\n       {/*  <span className=\"book-title\">{title}</span> */}\r\n        <div className=\"book-author\">{author}</div>\r\n        <div className=\"book-price\">${price}</div>\r\n        <button \r\n          onClick={onAddedToCart}\r\n          className=\"btn btn-info add-to-cart\">\r\n            Add to cart\r\n        </button>\r\n      </div>\r\n\r\n    </div>\r\n   );\r\n};\r\n\r\nexport default BookListItem;","import React from 'react';\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n  BookstoreServiceProvider,\r\n  BookstoreServiceConsumer\r\n};","import React from 'react';\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n\r\n  return (props) => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {\r\n          (bookstoreService) => {\r\n            return (<Wrapped {...props}\r\n                     bookstoreService={bookstoreService}/>);\r\n          }\r\n        }\r\n      </BookstoreServiceConsumer>\r\n    );\r\n  }\r\n};\r\n\r\nexport default withBookstoreService;","const booksLoaded = (newBooks) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_SUCCESS',\r\n    payload: newBooks\r\n  };\r\n};\r\n\r\nconst booksRequested = () => {\r\n  return {\r\n    type: 'FETCH_BOOKS_REQUEST'\r\n  };\r\n};\r\n\r\nconst booksError = (error) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_FAILURE',\r\n    payload: error\r\n  };\r\n};\r\n\r\nexport const bookAddedToCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_ADDED_TO_CART',\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nexport const bookRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_REMOVED_FROM_CART',\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nexport const allBooksRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n    payload: bookId\r\n  };\r\n};\r\n\r\n\r\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {              // special sintaksis to work with Thunk store\r\n  dispatch(booksRequested());\r\n  bookstoreService.getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((err) => dispatch(booksError(err)));\r\n};\r\n\r\nexport {\r\n  fetchBooks\r\n};","const compose = (...funcs) => (comp) => {\r\n    return funcs.reduceRight(\r\n      (wrapped, f) => f(wrapped), comp);\r\n  };\r\n  \r\n  export default compose;","import Spinner from './spinner';\r\n\r\nexport default Spinner;","import React from 'react';\r\nimport './spinner.scss';\r\n\r\nconst Spinner = () => {\r\n  return <div>loading...</div>;\r\n};\r\n\r\nexport default Spinner;","import ErrorIndicator from './error-indicator';\r\n\r\nexport default ErrorIndicator;","import React from 'react';\r\nimport './error-indicator.scss';\r\n\r\nconst ErrorIndicator = () => {\r\n  return <div>Error!</div>;\r\n};\r\n\r\nexport default ErrorIndicator;","import React, { Component } from 'react';\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux';\r\n\r\nimport BookListItem from '../book-list-item';\r\nimport { withBookstoreService } from '../hoc';\r\nimport { fetchBooks, bookAddedToCart } from '../actions';\r\nimport { compose } from '../utils';\r\nimport Spinner from '../spinner';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nimport './book-list.scss';\r\n\r\nconst BookList = ( { books, onAddedToCart } ) => {\r\n  return (\r\n    <ul className=\"book-list\">\r\n      {\r\n        books.map((book) => {\r\n          return (\r\n            <li key={book.id}>\r\n              <BookListItem \r\n                book={book}\r\n                onAddedToCart={() => onAddedToCart(book.id)} />\r\n            </li>\r\n          )\r\n        })\r\n      }\r\n    </ul>\r\n  );\r\n};\r\n\r\nclass BookListContainer extends Component {\r\n\r\n  componentDidMount() {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, loading, error, onAddedToCart } = this.props;\r\n    if (loading) return <Spinner />\r\n    if (error) return <ErrorIndicator />;\r\n\r\n    return (\r\n      <BookList books={books} onAddedToCart={onAddedToCart} />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error }}) => {\r\n  return { books, loading, error };                            \r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\r\n\r\n  return bindActionCreators({\r\n    fetchBooks: fetchBooks(bookstoreService),      \r\n    onAddedToCart: bookAddedToCart\r\n  }, dispatch);\r\n};\r\n\r\n\r\nexport default compose(\r\n  withBookstoreService(),\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer);\r\n\r\n","import BookList from './book-list';\r\n\r\nexport default BookList;","import React from 'react';\r\n\r\nimport BookList from '../book-list';\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <>\r\n      <BookList />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default HomePage;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { bookAddedToCart, bookRemovedFromCart, allBooksRemovedFromCart } from '../actions';\r\n\r\nimport './shopping-cart-table.scss';\r\n\r\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete }) => {\r\n  const renderRow = (item, idx) => {\r\n    const { id, title, count, total } = item;\r\n    return (\r\n      <tr key={id}>\r\n        <td>{idx + 1}</td>\r\n        <td>{title}</td>\r\n        <td>{count}</td>\r\n        <td>${total.toFixed(2)}</td>\r\n        <td>\r\n          <button\r\n            onClick={() => onDelete(id)}\r\n            className=\"btn btn-outline-danger btn-sm float-right\">\r\n            <i className=\"fa fa-trash-o\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onIncrease(id)}\r\n            className=\"btn btn-outline-success btn-sm float-right\">\r\n            <i className=\"fa fa-plus-circle\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onDecrease(id)}\r\n            className=\"btn btn-outline-warning btn-sm float-right\">\r\n            <i className=\"fa fa-minus-circle\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"shopping-cart-table\">\r\n      <h2>Your Order</h2>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Item</th>\r\n            <th>Count</th>\r\n            <th>Price</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n        { items.map(renderRow) }\r\n        </tbody>\r\n      </table>\r\n\r\n      <div className=\"total\">\r\n        Total: ${total}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal }}) => {\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal\r\n  };\r\n};\r\n\r\n\r\nconst mapDispatchToProps = {\r\n  onIncrease: bookAddedToCart,\r\n  onDecrease: bookRemovedFromCart,\r\n  onDelete: allBooksRemovedFromCart\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);","import ShoppingCartTable from './shopping-cart-table';\r\n\r\nexport default ShoppingCartTable;","import React from 'react';\r\n\r\nimport ShoppingCartTable from '../shopping-cart-table';\r\n\r\nconst CartPage = () => {\r\n  return ( \r\n    <>\r\n      <ShoppingCartTable />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default CartPage;","import App from './app';\r\n\r\nexport default App;","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\n\r\nimport ShopHeader from '../shop-header';\r\nimport { HomePage, CartPage } from '../pages';\r\nimport './app.scss';\r\n\r\nconst App = () => {\r\n  return (\r\n    <main role=\"main\" className=\"container\">\r\n      <ShopHeader />\r\n      <Switch>\r\n        <Route exact path=\"/react-redux-store\" component={HomePage} />\r\n        <Route path=\"/cart\" component={CartPage} />\r\n        <Route component={HomePage}/>\r\n      </Switch>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default App;","import ErrorBoundry from './error-boundry';\r\n\r\nexport default ErrorBoundry;","import React, { Component } from 'react';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n\r\n  state = {\r\n    hasError: false\r\n  };\r\n\r\n  componentDidCatch() {\r\n    this.setState({ hasError: true });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <ErrorIndicator />;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}","export default class BookstoreService {\r\n\r\n  data = [\r\n      {\r\n        id: 1,\r\n        title: 'Production-Ready Microservices',\r\n        author: 'Susan J. Fowler',\r\n        price: 4.01,\r\n        coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg',\r\n        page: 'https://www.amazon.com/Production-Ready-Microservices-Susan-Fowler/dp/1491965975/'},\r\n      {\r\n        id: 2,\r\n        title: 'Release It!',\r\n        author: 'Michael T. Nygard',\r\n        price: 28.89,\r\n        coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg',\r\n        page: 'https://www.amazon.com/Release-Design-Deploy-Production-Ready-Software/dp/1680502395/'},\r\n      {\r\n        id: 3,\r\n        title: 'Modern JavaScript for the Impatient 1st Edition',\r\n        author: ' Cay Horstmann',\r\n        price: 40.49,\r\n        coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51Y5+ZPSaYL._SX376_BO1,204,203,200_.jpg',\r\n        page: 'https://www.amazon.com/Modern-JavaScript-Impatient-Cay-Horstmann/dp/0136502148/'},\r\n      {\r\n        id: 4,\r\n        title: 'JavaScript. The Definitive Guide 7th Edition',\r\n        author: 'David Flanagan',\r\n        price: 22.75,\r\n        coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51wijnc-Y8L._SX379_BO1,204,203,200_.jpg',\r\n        page: 'https://www.amazon.com/JavaScript-Definitive-Most-Used-Programming-Language/dp/1491952024/'},\r\n      {\r\n        id: 5,\r\n        title: 'The Road to React',\r\n        author: 'Robin Wieruch',\r\n        price: 28.49,\r\n        coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41+WkW8xuAS._SX384_BO1,204,203,200_.jpg',\r\n        page: 'https://www.amazon.com/Road-learn-React-pragmatic-React-js/dp/172004399X/'},\r\n  ];\r\n\r\n  getBooks() {\r\n    return new Promise((resolve/* , reject */) => {\r\n      setTimeout(() => {\r\n        resolve(this.data)\r\n        //reject(new Error('Error is found')); // for Error testing\r\n      }, 700);\r\n    });\r\n  }\r\n}","const updateBookList = (state, action) => {\r\n\r\n    if (state === undefined) {\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null\r\n      };\r\n    }\r\n  \r\n    switch (action.type) {\r\n      case 'FETCH_BOOKS_REQUEST':\r\n        return {\r\n          books: [],\r\n          loading: true,\r\n          error: null\r\n        };\r\n  \r\n      case 'FETCH_BOOKS_SUCCESS':\r\n        return {\r\n          books: action.payload,\r\n          loading: false,\r\n          error: null\r\n        };\r\n  \r\n      case 'FETCH_BOOKS_FAILURE':\r\n        return {\r\n          books: [],\r\n          loading: false,\r\n          error: action.payload\r\n        };\r\n  \r\n      default:\r\n        return state.bookList;\r\n    }\r\n  };\r\n  \r\n  export default updateBookList;","const updateCartItems = (cartItems, item, idx) => {\r\n    if (item.count === 0) {                 // removing element (book row)\r\n      return [\r\n        ...cartItems.slice(0, idx),\r\n        ...cartItems.slice(idx + 1)\r\n      ]\r\n    }\r\n  \r\n    if (idx === -1) {                       // adding a new element\r\n      return [\r\n        ...cartItems,\r\n        item\r\n      ]\r\n    }\r\n    \r\n    return  [                                // updating elements\r\n      ...cartItems.slice(0, idx),\r\n      item,\r\n      ...cartItems.slice(idx + 1)\r\n    ]\r\n  };\r\n  \r\n  const updateCartItem = (book, item = {}, quantity) => {\r\n  \r\n    const {\r\n      id = book.id,\r\n      count = 0,\r\n      title = book.title,\r\n      total = 0 } = item;\r\n  \r\n    return {\r\n      id,\r\n      title,\r\n      count: count + quantity,\r\n      total: total + quantity*book.price\r\n    };\r\n  };\r\n  \r\n  const updateOrder = (state, bookId, quantity) => {\r\n    const { bookList: { books }, shoppingCart: { cartItems }} = state;\r\n  \r\n    const book = books.find(({id}) => id === bookId);\r\n    const itemIndex = cartItems.findIndex(({id}) => id === bookId);\r\n    const item = cartItems[itemIndex];\r\n\r\n    const newItem = updateCartItem(book, item, quantity); \r\n\r\n    return {\r\n      totalCount: updateCartItems(cartItems, newItem, itemIndex).map(item => item.count).reduce((a, b) => (a + b), 0),\r\n      orderTotal: updateCartItems(cartItems, newItem, itemIndex).map(item => item.total).reduce((a, b) => (a + b), 0).toFixed(2),\r\n      cartItems: updateCartItems(cartItems, newItem, itemIndex)\r\n    };\r\n  };\r\n  \r\n  const updateShoppingCart = (state, action) => {\r\n    if (state === undefined) {\r\n      return {\r\n        totalCount: 0,\r\n        cartItems: [],\r\n        orderTotal: 0\r\n      }\r\n    }\r\n  \r\n    switch(action.type) {\r\n      case 'BOOK_ADDED_TO_CART':\r\n        return updateOrder(state, action.payload, 1);\r\n  \r\n      case 'BOOK_REMOVED_FROM_CART':\r\n        return updateOrder(state, action.payload, -1);\r\n  \r\n      case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n        const item = state.shoppingCart.cartItems.find(({id}) => id === action.payload);\r\n        return updateOrder(state, action.payload, -item.count);\r\n  \r\n      default:\r\n        return state.shoppingCart;\r\n    }\r\n  };\r\n  \r\n  export default updateShoppingCart;","import updateBookList from './book-list';\r\nimport updateShoppingCart from './shopping-cart';\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    bookList: updateBookList(state, action),\r\n    shoppingCart: updateShoppingCart(state, action)\r\n  };\r\n};\r\n\r\nexport default reducer;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\n\nimport App from './components/app';\nimport ErrorBoundry from './components/error-boundry';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store ={store}>\n        <ErrorBoundry>\n            <BookstoreServiceProvider value={bookstoreService}>\n                <Router>\n                    <App />\n                </Router>\n            </BookstoreServiceProvider>\n        </ErrorBoundry>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}